library(dplyr)
library(readr)
library(purrr)
library(tibble)
## -----------------------------------------
datatran2019 <- read_csv("R/Dados/datatran2019.csv")
library(magrittr)
datatran2019 <- read_csv("R/Dados/datatran2019.csv") %T>%
head()
(datatran2019 <- read_csv("R/Dados/datatran2019.csv"))
(datatran2019 <- read_csv2("R/Dados/datatran2019.csv"))
(datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1")))
glimpse(datatran2019)
library(rlang)
library(vctrs)
datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1")) %>%
map_if(is_character(), vec_cast(character()))
datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1")) %>%
convert(chr(municipio : uso_solo))
install.packages("hablar")
library(hablar)
(datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1")) %>%
convert(chr(municipio : uso_solo)) )  # lê com encoding apropriado
datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1"))
.df <- datatran
.df <- datatran2019
varList <- map(ncol(.df), ~ pull(.df, .x))
varList
varList <- map(1:ncol(.df), ~ pull(.df, .x))
varList
varList %>% str()
map_if(is_character(),
varList,
~ factor(.x)) %>%
invoke(cbind) %>%
as_tibble() %>% str()
map_if(is_character(),
varList,
~ as_factor(.x))
map_if(.p = is_character(),
.x = varList,
~ as_factor(.x))
map_if(.x = varList,
~ is_character(.x),
~ as_factor(.x))
install.packages(forcats)
install.packages("forcats")
require(forcats, quietly = TRUE)
require(forcats, quietly = TRUE)
library(forcats)
map_if(.x = varList,
~ is_character(.x),
~ (.x))
map_if(.x = varList,
~ is_character(.x),
~ (.x)) %>%
invoke(cbind)
map_if(.x = varList,
~ is_character(.x),
~ (.x)) %>%
exec(cbind)
map_if(.x = varList,
~ is_character(.x),
~ (.x))
map_if(.x = varList,
~ is_character(.x),
~ (.x)) %>% str()
map_if(.x = varList,
~ is_character(.x),
~ as_factor(.x))
map_if(.x = varList,
~ is_character(.x),
~ as_factor(.x)) %>% str()
map_if(.x = varList,
~ is_character(.x),
~ as_factor(.x)) %>%
exec(cbind)
datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1")) %>%
mutate_if(is_character, as_factor)
datatran2019
library(vctrs)
(datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1")) %>%
mutate_if(is_character, as_factor) %>%
mutate(id = vec_cast(id, character())))
datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1")) %>%
mutate_if(is_character, as_factor) %>%
mutate(id = vec_cast(id, character())) %T>%
saveRDS("acidentes.Rds")
datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1")) %>%
mutate_if(is_character, as_factor) %>%
mutate(id = vec_cast(id, character())) %T>%
saveRDS("Dados/acidentes.Rds")
saveRDS(datatran2019, "Dados/acidentes.Rds")
getwd()
datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1")) %>%
mutate_if(is_character, as_factor) %>%
mutate(id = vec_cast(id, character())) %T>%
saveRDS("R/Dados/acidentes.Rds")
rm(varList)
ggsave <- partial(ggplot2::ggsave,
device = "png",
dpi = 320,
path = "imagens",
width = 8,
height = 11,
units = "in")
rm(ggsave)
ggSave <- partial(ggplot2::ggsave,
device = "png",
dpi = 320,
path = "imagens",
width = 8,
height = 11,
units = "in")
dados
dados <- readRDS("R/Dados/acidentes.Rds")
dados
source('C:/Users/cavap/Desktop/Cava/monografiaRandomForest/R/Scripts/leitura.R', encoding = 'UTF-8', echo=TRUE)
library(dplyr)
library(ggplot2)
library(magrittr)
library(purrr)
ggSave <- partial(ggplot2::ggsave,
device = "png",
dpi = 320,
path = "imagens",
width = 8,
height = 11,
units = "in")
dados <- readRDS("R/Dados/acidentes.Rds")
geomPoint <- partial(ggplot2::geom_point,
alpha = .7)
dados <- readRDS("R/Dados/acidentes.Rds")
dados %>%
ggplot(aes(x = latitude, y = longitude)) +
geomPoint()
dados %>%
ggplot(aes(x = longitude, y = latitude)) +
geomPoint()
dados %>%
ggplot(aes(x = longitude, y = latitude)) +
geomPoint(color = br) +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
dados$br
dados %>%
ggplot(aes(x = longitude, y = latitude)) +
geomPoint(color = br) +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geomPoint() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1")) %>%
filter(uf == "RJ") %>%
mutate_if(is_character, as_factor) %>%
mutate(id = vec_cast(id, character()),
uf = NULL,
br = as_factor(br),
horario = hour(horario)) %T>%
saveRDS("R/Dados/acidentes.Rds")
dados <- readRDS("R/Dados/acidentes.Rds")
## -----------------------------------------
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geomPoint() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
datatran2019 <- read_csv2("R/Dados/datatran2019.csv",
locale = readr::locale(encoding = "latin1")) %>%
filter(uf == "RJ" & !is.na(br)) %>%
mutate_if(is_character, as_factor) %>%
mutate(id = vec_cast(id, character()),
uf = NULL,
br = as_factor(br),
horario = hour(horario)) %T>%
saveRDS("R/Dados/acidentes.Rds")
dados <- readRDS("R/Dados/acidentes.Rds")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geomPoint() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_line() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geomPoint() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal() %>%
ggSave("redeEstradasAcidentes")
ggSave <- partial(ggplot2::ggsave,
device = png(),
dpi = 320,
path = "imagens",
width = 8,
height = 11,
units = "in")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal() %>%
ggSave("redeEstradasAcidentes")
ggSave <- partial(ggplot2::ggsave,
device = "png",
dpi = 320,
path = "imagens",
width = 8,
height = 11,
units = "in")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal() %>%
ggSave("redeEstradasAcidentes")
getwd()
paste0(getwd(),"/imagens")
ggSave <- partial(ggplot2::ggsave,
device = "png",
dpi = 320,
path = paste0(getwd(),"/imagens"),
width = 8,
height = 11,
units = "in")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal() %>%
ggSave("redeEstradasAcidentes")
ggSave <- partial(ggplot2::ggsave,
device = "png",
dpi = 320,
path = paste0(getwd(),"/imagens"),
width = 8,
height = 11,
units = "in")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal() %>%
ggSave("redeEstradasAcidentes")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal() %>%
ggSave(filename = "redeEstradasAcidentes")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
ggSave(filename = "redeEstradasAcidentes")
ggSave <- partial(ggplot2::ggsave,
dpi = 320,
path = paste0(getwd(),"/imagens"),
width = 8,
height = 11,
units = "in")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
ggSave(filename = "redeEstradasAcidentes.png")
ggSave <- partial(ggplot2::ggsave,
dpi = 320,
path = paste0(getwd(),"/imagens"),
width = 4,
height = 4/1.61,
units = "in")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
ggSave(filename = "redeEstradasAcidentes.png")
ggSave <- partial(ggplot2::ggsave,
dpi = 200,
path = paste0(getwd(),"/imagens"),
width = 4,
height = 4/1.61,
units = "in")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
ggSave(filename = "redeEstradasAcidentes.png")
ggSave <- partial(ggplot2::ggsave,
dpi = 200,
path = paste0(getwd(),"/imagens"),
width = 4,
units = "in")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
ggSave(filename = "redeEstradasAcidentes.png")
ggSave <- partial(ggplot2::ggsave,
dpi = 200,
path = paste0(getwd(),"/imagens"))
dados <- readRDS("R/Dados/acidentes.Rds")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
ggSave(filename = "redeEstradasAcidentes.png")
ggSave <- partial(ggplot2::ggsave,
dpi = 200,
path = paste0(getwd(),"/imagens"),
width = 10.6,
height = 5.62,
units = "in")
dados <- readRDS("R/Dados/acidentes.Rds")
dados %>%
ggplot(aes(x = longitude, y = latitude, color = br)) +
geom_point() +
labs(title = "Reconstruindo a Rede de Estradas Federais no RJ pelos Acidentes",
x = "Longitude",
y = "Latitude",
caption = "Fonte: Polícia Rodoviária Federal") +
theme_minimal()
ggSave(filename = "redeEstradasAcidentes.png")
